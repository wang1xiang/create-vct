import p from"node:fs";import M from"node:path";import{fileURLToPath as It}from"node:url";import Te from"readline";import Ce from"events";import*as Rt from"@babel/core";function jt(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function _e(i,t){var e=i;t.slice(0,-1).forEach(function(n){e=e[n]||{}});var s=t[t.length-1];return s in e}function Ft(i){return typeof i=="number"||/^0x[0-9a-f]+$/i.test(i)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(i)}function Lt(i,t){return t==="constructor"&&typeof i[t]=="function"||t==="__proto__"}var Ae=function(i,t){t||(t={});var e={bools:{},strings:{},unknownFn:null};typeof t.unknown=="function"&&(e.unknownFn=t.unknown),typeof t.boolean=="boolean"&&t.boolean?e.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach(function(c){e.bools[c]=!0});var s={};function n(c){return s[c].some(function(S){return e.bools[S]})}Object.keys(t.alias||{}).forEach(function(c){s[c]=[].concat(t.alias[c]),s[c].forEach(function(S){s[S]=[c].concat(s[c].filter(function(C){return S!==C}))})}),[].concat(t.string).filter(Boolean).forEach(function(c){e.strings[c]=!0,s[c]&&[].concat(s[c]).forEach(function(S){e.strings[S]=!0})});var o=t.default||{},r={_:[]};function l(c,S){return e.allBools&&/^--[^=]+$/.test(S)||e.strings[c]||e.bools[c]||s[c]}function w(c,S,C){for(var f=c,N=0;N<S.length-1;N++){var _=S[N];if(Lt(f,_))return;f[_]===void 0&&(f[_]={}),(f[_]===Object.prototype||f[_]===Number.prototype||f[_]===String.prototype)&&(f[_]={}),f[_]===Array.prototype&&(f[_]=[]),f=f[_]}var A=S[S.length-1];Lt(f,A)||((f===Object.prototype||f===Number.prototype||f===String.prototype)&&(f={}),f===Array.prototype&&(f=[]),f[A]===void 0||e.bools[A]||typeof f[A]=="boolean"?f[A]=C:Array.isArray(f[A])?f[A].push(C):f[A]=[f[A],C])}function h(c,S,C){if(!(C&&e.unknownFn&&!l(c,C)&&e.unknownFn(C)===!1)){var f=!e.strings[c]&&Ft(S)?Number(S):S;w(r,c.split("."),f),(s[c]||[]).forEach(function(N){w(r,N.split("."),f)})}}Object.keys(e.bools).forEach(function(c){h(c,o[c]===void 0?!1:o[c])});var O=[];i.indexOf("--")!==-1&&(O=i.slice(i.indexOf("--")+1),i=i.slice(0,i.indexOf("--")));for(var v=0;v<i.length;v++){var u=i[v],a,y;if(/^--.+=/.test(u)){var E=u.match(/^--([^=]+)=([\s\S]*)$/);a=E[1];var L=E[2];e.bools[a]&&(L=L!=="false"),h(a,L,u)}else if(/^--no-.+/.test(u))a=u.match(/^--no-(.+)/)[1],h(a,!1,u);else if(/^--.+/.test(u))a=u.match(/^--(.+)/)[1],y=i[v+1],y!==void 0&&!/^(-|--)[^-]/.test(y)&&!e.bools[a]&&!e.allBools&&(!s[a]||!n(a))?(h(a,y,u),v+=1):/^(true|false)$/.test(y)?(h(a,y==="true",u),v+=1):h(a,e.strings[a]?"":!0,u);else if(/^-[^-]+/.test(u)){for(var P=u.slice(1,-1).split(""),Z=!1,d=0;d<P.length;d++){if(y=u.slice(d+2),y==="-"){h(P[d],y,u);continue}if(/[A-Za-z]/.test(P[d])&&y[0]==="="){h(P[d],y.slice(1),u),Z=!0;break}if(/[A-Za-z]/.test(P[d])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(y)){h(P[d],y,u),Z=!0;break}if(P[d+1]&&P[d+1].match(/\W/)){h(P[d],u.slice(d+2),u),Z=!0;break}else h(P[d],e.strings[P[d]]?"":!0,u)}a=u.slice(-1)[0],!Z&&a!=="-"&&(i[v+1]&&!/^(-|--)[^-]/.test(i[v+1])&&!e.bools[a]&&(!s[a]||!n(a))?(h(a,i[v+1],u),v+=1):i[v+1]&&/^(true|false)$/.test(i[v+1])?(h(a,i[v+1]==="true",u),v+=1):h(a,e.strings[a]?"":!0,u))}else if((!e.unknownFn||e.unknownFn(u)!==!1)&&r._.push(e.strings._||!Ft(u)?u:Number(u)),t.stopEarly){r._.push.apply(r._,i.slice(v+1));break}}return Object.keys(o).forEach(function(c){_e(r,c.split("."))||(w(r,c.split("."),o[c]),(s[c]||[]).forEach(function(S){w(r,S.split("."),o[c])}))}),t["--"]?r["--"]=O.slice():O.forEach(function(c){r._.push(c)}),r};const De=jt(Ae);var Nt={};const{FORCE_COLOR:Ee,NODE_DISABLE_COLORS:Ie,TERM:Re}=process.env,b={enabled:!Ie&&Re!=="dumb"&&Ee!=="0",reset:$(0,0),bold:$(1,22),dim:$(2,22),italic:$(3,23),underline:$(4,24),inverse:$(7,27),hidden:$(8,28),strikethrough:$(9,29),black:$(30,39),red:$(31,39),green:$(32,39),yellow:$(33,39),blue:$(34,39),magenta:$(35,39),cyan:$(36,39),white:$(37,39),gray:$(90,39),grey:$(90,39),bgBlack:$(40,49),bgRed:$(41,49),bgGreen:$(42,49),bgYellow:$(43,49),bgBlue:$(44,49),bgMagenta:$(45,49),bgCyan:$(46,49),bgWhite:$(47,49)};function Yt(i,t){let e=0,s,n="",o="";for(;e<i.length;e++)s=i[e],n+=s.open,o+=s.close,t.includes(s.close)&&(t=t.replace(s.rgx,s.close+s.open));return n+t+o}function je(i,t){let e={has:i,keys:t};return e.reset=b.reset.bind(e),e.bold=b.bold.bind(e),e.dim=b.dim.bind(e),e.italic=b.italic.bind(e),e.underline=b.underline.bind(e),e.inverse=b.inverse.bind(e),e.hidden=b.hidden.bind(e),e.strikethrough=b.strikethrough.bind(e),e.black=b.black.bind(e),e.red=b.red.bind(e),e.green=b.green.bind(e),e.yellow=b.yellow.bind(e),e.blue=b.blue.bind(e),e.magenta=b.magenta.bind(e),e.cyan=b.cyan.bind(e),e.white=b.white.bind(e),e.gray=b.gray.bind(e),e.grey=b.grey.bind(e),e.bgBlack=b.bgBlack.bind(e),e.bgRed=b.bgRed.bind(e),e.bgGreen=b.bgGreen.bind(e),e.bgYellow=b.bgYellow.bind(e),e.bgBlue=b.bgBlue.bind(e),e.bgMagenta=b.bgMagenta.bind(e),e.bgCyan=b.bgCyan.bind(e),e.bgWhite=b.bgWhite.bind(e),e}function $(i,t){let e={open:`\x1B[${i}m`,close:`\x1B[${t}m`,rgx:new RegExp(`\\x1b\\[${t}m`,"g")};return function(s){return this!==void 0&&this.has!==void 0?(this.has.includes(i)||(this.has.push(i),this.keys.push(e)),s===void 0?this:b.enabled?Yt(this.keys,s+""):s+""):s===void 0?je([i],[e]):b.enabled?Yt([e],s+""):s+""}}var I=b,Fe=(i,t)=>{if(!(i.meta&&i.name!=="escape")){if(i.ctrl){if(i.name==="a")return"first";if(i.name==="c"||i.name==="d")return"abort";if(i.name==="e")return"last";if(i.name==="g")return"reset"}if(t){if(i.name==="j")return"down";if(i.name==="k")return"up"}return i.name==="return"||i.name==="enter"?"submit":i.name==="backspace"?"delete":i.name==="delete"?"deleteForward":i.name==="abort"?"abort":i.name==="escape"?"exit":i.name==="tab"?"next":i.name==="pagedown"?"nextPage":i.name==="pageup"?"prevPage":i.name==="home"?"home":i.name==="end"?"end":i.name==="up"?"up":i.name==="down"?"down":i.name==="right"?"right":i.name==="left"?"left":!1}},vt=i=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),e=new RegExp(t,"g");return typeof i=="string"?i.replace(e,""):i};const bt="\x1B",x=`${bt}[`,Le="\x07",wt={to(i,t){return t?`${x}${t+1};${i+1}H`:`${x}${i+1}G`},move(i,t){let e="";return i<0?e+=`${x}${-i}D`:i>0&&(e+=`${x}${i}C`),t<0?e+=`${x}${-t}A`:t>0&&(e+=`${x}${t}B`),e},up:(i=1)=>`${x}${i}A`,down:(i=1)=>`${x}${i}B`,forward:(i=1)=>`${x}${i}C`,backward:(i=1)=>`${x}${i}D`,nextLine:(i=1)=>`${x}E`.repeat(i),prevLine:(i=1)=>`${x}F`.repeat(i),left:`${x}G`,hide:`${x}?25l`,show:`${x}?25h`,save:`${bt}7`,restore:`${bt}8`},Ne={up:(i=1)=>`${x}S`.repeat(i),down:(i=1)=>`${x}T`.repeat(i)},Ye={screen:`${x}2J`,up:(i=1)=>`${x}1J`.repeat(i),down:(i=1)=>`${x}J`.repeat(i),line:`${x}2K`,lineEnd:`${x}K`,lineStart:`${x}1K`,lines(i){let t="";for(let e=0;e<i;e++)t+=this.line+(e<i-1?wt.up():"");return i&&(t+=wt.left),t}};var R={cursor:wt,scroll:Ne,erase:Ye,beep:Le};const ke=vt,{erase:kt,cursor:He}=R,Ve=i=>[...ke(i)].length;var Be=function(i,t){if(!t)return kt.line+He.to(0);let e=0;const s=i.split(/\r?\n/);for(let n of s)e+=1+Math.floor(Math.max(Ve(n)-1,0)/t);return kt.lines(e)};const it={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},Je={arrowUp:it.arrowUp,arrowDown:it.arrowDown,arrowLeft:it.arrowLeft,arrowRight:it.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"},Ue=process.platform==="win32"?Je:it;var Ht=Ue;const q=I,G=Ht,yt=Object.freeze({password:{scale:1,render:i=>"*".repeat(i.length)},emoji:{scale:2,render:i=>"\u{1F603}".repeat(i.length)},invisible:{scale:0,render:i=>""},default:{scale:1,render:i=>`${i}`}}),ze=i=>yt[i]||yt.default,st=Object.freeze({aborted:q.red(G.cross),done:q.green(G.tick),exited:q.yellow(G.cross),default:q.cyan("?")}),We=(i,t,e)=>t?st.aborted:e?st.exited:i?st.done:st.default,Ge=i=>q.gray(i?G.ellipsis:G.pointerSmall),Ke=(i,t)=>q.gray(i?t?G.pointerSmall:"+":G.line);var Ze={styles:yt,render:ze,symbols:st,symbol:We,delimiter:Ge,item:Ke};const qe=vt;var Qe=function(i,t){let e=String(qe(i)||"").split(/\r?\n/);return t?e.map(s=>Math.ceil(s.length/t)).reduce((s,n)=>s+n):e.length},Xe=(i,t={})=>{const e=Number.isSafeInteger(parseInt(t.margin))?new Array(parseInt(t.margin)).fill(" ").join(""):t.margin||"",s=t.width;return(i||"").split(/\r?\n/g).map(n=>n.split(/\s+/g).reduce((o,r)=>(r.length+e.length>=s||o[o.length-1].length+r.length+1<s?o[o.length-1]+=` ${r}`:o.push(`${e}${r}`),o),[e]).join(`
`)).join(`
`)},ti=(i,t,e)=>{e=e||t;let s=Math.min(t-e,i-Math.floor(e/2));s<0&&(s=0);let n=Math.min(s+e,t);return{startIndex:s,endIndex:n}},j={action:Fe,clear:Be,style:Ze,strip:vt,figures:Ht,lines:Qe,wrap:Xe,entriesToDisplay:ti};const Vt=Te,{action:ei}=j,ii=Ce,{beep:si,cursor:ri}=R,ni=I;let oi=class extends ii{constructor(t={}){super(),this.firstRender=!0,this.in=t.stdin||process.stdin,this.out=t.stdout||process.stdout,this.onRender=(t.onRender||(()=>{})).bind(this);const e=Vt.createInterface({input:this.in,escapeCodeTimeout:50});Vt.emitKeypressEvents(this.in,e),this.in.isTTY&&this.in.setRawMode(!0);const s=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,n=(o,r)=>{let l=ei(r,s);l===!1?this._&&this._(o,r):typeof this[l]=="function"?this[l](r):this.bell()};this.close=()=>{this.out.write(ri.show),this.in.removeListener("keypress",n),this.in.isTTY&&this.in.setRawMode(!1),e.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",n)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(si)}render(){this.onRender(ni),this.firstRender&&(this.firstRender=!1)}};var B=oi;const lt=I,li=B,{erase:hi,cursor:rt}=R,{style:$t,clear:St,lines:ai,figures:ui}=j;class ci extends li{constructor(t={}){super(t),this.transform=$t.render(t.style),this.scale=this.transform.scale,this.msg=t.message,this.initial=t.initial||"",this.validator=t.validate||(()=>!0),this.value="",this.errorMsg=t.error||"Please Enter A Valid Value",this.cursor=+!!this.initial,this.cursorOffset=0,this.clear=St("",this.out.columns),this.render()}set value(t){!t&&this.initial?(this.placeholder=!0,this.rendered=lt.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(t)),this._value=t,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=+!!this.initial,this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(t){this.placeholder||(this.cursor=this.cursor+t,this.cursorOffset+=t)}_(t,e){let s=this.value.slice(0,this.cursor),n=this.value.slice(this.cursor);this.value=`${s}${t}${n}`,this.red=!1,this.cursor=this.placeholder?0:s.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let t=this.value.slice(0,this.cursor-1),e=this.value.slice(this.cursor);this.value=`${t}${e}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let t=this.value.slice(0,this.cursor),e=this.value.slice(this.cursor+1);this.value=`${t}${e}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(rt.down(ai(this.outputError,this.out.columns)-1)+St(this.outputError,this.out.columns)),this.out.write(St(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[$t.symbol(this.done,this.aborted),lt.bold(this.msg),$t.delimiter(this.done),this.red?lt.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,e,s)=>t+`
${s?" ":ui.pointerSmall} ${lt.red().italic(e)}`,"")),this.out.write(hi.line+rt.to(0)+this.outputText+rt.save+this.outputError+rt.restore+rt.move(this.cursorOffset,0)))}}var di=ci;const Y=I,fi=B,{style:Bt,clear:Jt,figures:ht,wrap:pi,entriesToDisplay:mi}=j,{cursor:gi}=R;class vi extends fi{constructor(t={}){super(t),this.msg=t.message,this.hint=t.hint||"- Use arrow-keys. Return to submit.",this.warn=t.warn||"- This option is disabled",this.cursor=t.initial||0,this.choices=t.choices.map((e,s)=>(typeof e=="string"&&(e={title:e,value:s}),{title:e&&(e.title||e.value||e),value:e&&(e.value===void 0?s:e.value),description:e&&e.description,selected:e&&e.selected,disabled:e&&e.disabled})),this.optionsPerPage=t.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=Jt("",this.out.columns),this.render()}moveCursor(t){this.cursor=t,this.value=this.choices[t].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(t,e){if(t===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(gi.hide):this.out.write(Jt(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:e}=mi(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[Bt.symbol(this.done,this.aborted),Y.bold(this.msg),Bt.delimiter(!1),this.done?this.selection.title:this.selection.disabled?Y.yellow(this.warn):Y.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let s=t;s<e;s++){let n,o,r="",l=this.choices[s];s===t&&t>0?o=ht.arrowUp:s===e-1&&e<this.choices.length?o=ht.arrowDown:o=" ",l.disabled?(n=this.cursor===s?Y.gray().underline(l.title):Y.strikethrough().gray(l.title),o=(this.cursor===s?Y.bold().gray(ht.pointer)+" ":"  ")+o):(n=this.cursor===s?Y.cyan().underline(l.title):l.title,o=(this.cursor===s?Y.cyan(ht.pointer)+" ":"  ")+o,l.description&&this.cursor===s&&(r=` - ${l.description}`,(o.length+n.length+r.length>=this.out.columns||l.description.split(/\r?\n/).length>1)&&(r=`
`+pi(l.description,{margin:3,width:this.out.columns})))),this.outputText+=`${o} ${n}${Y.gray(r)}
`}}this.out.write(this.outputText)}}var bi=vi;const at=I,wi=B,{style:Ut,clear:yi}=j,{cursor:zt,erase:$i}=R;class Si extends wi{constructor(t={}){super(t),this.msg=t.message,this.value=!!t.initial,this.active=t.active||"on",this.inactive=t.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(t,e){if(t===" ")this.value=!this.value;else if(t==="1")this.value=!0;else if(t==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(zt.hide):this.out.write(yi(this.outputText,this.out.columns)),super.render(),this.outputText=[Ut.symbol(this.done,this.aborted),at.bold(this.msg),Ut.delimiter(this.done),this.value?this.inactive:at.cyan().underline(this.inactive),at.gray("/"),this.value?at.cyan().underline(this.active):this.active].join(" "),this.out.write($i.line+zt.to(0)+this.outputText))}}var xi=Si;let Mi=class Et{constructor({token:t,date:e,parts:s,locales:n}){this.token=t,this.date=e||new Date,this.parts=s||[this],this.locales=n||{}}up(){}down(){}next(){const t=this.parts.indexOf(this);return this.parts.find((e,s)=>s>t&&e instanceof Et)}setTo(t){}prev(){let t=[].concat(this.parts).reverse();const e=t.indexOf(this);return t.find((s,n)=>n>e&&s instanceof Et)}toString(){return String(this.date)}};var k=Mi;const Oi=k;let Pi=class extends Oi{constructor(t={}){super(t)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let t=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?t.toUpperCase():t}};var Ti=Pi;const Ci=k,_i=i=>(i=i%10,i===1?"st":i===2?"nd":i===3?"rd":"th");let Ai=class extends Ci{constructor(t={}){super(t)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(t){this.date.setDate(parseInt(t.substr(-2)))}toString(){let t=this.date.getDate(),e=this.date.getDay();return this.token==="DD"?String(t).padStart(2,"0"):this.token==="Do"?t+_i(t):this.token==="d"?e+1:this.token==="ddd"?this.locales.weekdaysShort[e]:this.token==="dddd"?this.locales.weekdays[e]:t}};var Di=Ai;const Ei=k;let Ii=class extends Ei{constructor(t={}){super(t)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(t){this.date.setHours(parseInt(t.substr(-2)))}toString(){let t=this.date.getHours();return/h/.test(this.token)&&(t=t%12||12),this.token.length>1?String(t).padStart(2,"0"):t}};var Ri=Ii;const ji=k;let Fi=class extends ji{constructor(t={}){super(t)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(t){this.date.setMilliseconds(parseInt(t.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}};var Li=Fi;const Ni=k;let Yi=class extends Ni{constructor(t={}){super(t)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(t){this.date.setMinutes(parseInt(t.substr(-2)))}toString(){let t=this.date.getMinutes();return this.token.length>1?String(t).padStart(2,"0"):t}};var ki=Yi;const Hi=k;let Vi=class extends Hi{constructor(t={}){super(t)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(t){t=parseInt(t.substr(-2))-1,this.date.setMonth(t<0?0:t)}toString(){let t=this.date.getMonth(),e=this.token.length;return e===2?String(t+1).padStart(2,"0"):e===3?this.locales.monthsShort[t]:e===4?this.locales.months[t]:String(t+1)}};var Bi=Vi;const Ji=k;let Ui=class extends Ji{constructor(t={}){super(t)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(t){this.date.setSeconds(parseInt(t.substr(-2)))}toString(){let t=this.date.getSeconds();return this.token.length>1?String(t).padStart(2,"0"):t}};var zi=Ui;const Wi=k;let Gi=class extends Wi{constructor(t={}){super(t)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(t){this.date.setFullYear(t.substr(-4))}toString(){let t=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?t.substr(-2):t}};var Ki=Gi,Zi={DatePart:k,Meridiem:Ti,Day:Di,Hours:Ri,Milliseconds:Li,Minutes:ki,Month:Bi,Seconds:zi,Year:Ki};const xt=I,qi=B,{style:Wt,clear:Gt,figures:Qi}=j,{erase:Xi,cursor:Kt}=R,{DatePart:Zt,Meridiem:ts,Day:es,Hours:is,Milliseconds:ss,Minutes:rs,Month:ns,Seconds:os,Year:ls}=Zi,hs=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,qt={1:({token:i})=>i.replace(/\\(.)/g,"$1"),2:i=>new es(i),3:i=>new ns(i),4:i=>new ls(i),5:i=>new ts(i),6:i=>new is(i),7:i=>new rs(i),8:i=>new os(i),9:i=>new ss(i)},as={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class us extends qi{constructor(t={}){super(t),this.msg=t.message,this.cursor=0,this.typed="",this.locales=Object.assign(as,t.locales),this._date=t.initial||new Date,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.mask=t.mask||"YYYY-MM-DD HH:mm:ss",this.clear=Gt("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(t){t&&this._date.setTime(t.getTime())}set mask(t){let e;for(this.parts=[];e=hs.exec(t);){let n=e.shift(),o=e.findIndex(r=>r!=null);this.parts.push(o in qt?qt[o]({token:e[o]||n,date:this.date,parts:this.parts,locales:this.locales}):e[o]||n)}let s=this.parts.reduce((n,o)=>(typeof o=="string"&&typeof n[n.length-1]=="string"?n[n.length-1]+=o:n.push(o),n),[]);this.parts.splice(0),this.parts.push(...s),this.reset()}moveCursor(t){this.typed="",this.cursor=t,this.fire()}reset(){this.moveCursor(this.parts.findIndex(t=>t instanceof Zt)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let t=this.parts[this.cursor].prev();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}right(){let t=this.parts[this.cursor].next();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}next(){let t=this.parts[this.cursor].next();this.moveCursor(t?this.parts.indexOf(t):this.parts.findIndex(e=>e instanceof Zt)),this.render()}_(t){/\d/.test(t)&&(this.typed+=t,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(Kt.hide):this.out.write(Gt(this.outputText,this.out.columns)),super.render(),this.outputText=[Wt.symbol(this.done,this.aborted),xt.bold(this.msg),Wt.delimiter(!1),this.parts.reduce((t,e,s)=>t.concat(s===this.cursor&&!this.done?xt.cyan().underline(e.toString()):e),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((t,e,s)=>t+`
${s?" ":Qi.pointerSmall} ${xt.red().italic(e)}`,"")),this.out.write(Xi.line+Kt.to(0)+this.outputText))}}var cs=us;const ut=I,ds=B,{cursor:ct,erase:fs}=R,{style:Mt,figures:ps,clear:Qt,lines:ms}=j,gs=/[0-9]/,Ot=i=>i!==void 0,Xt=(i,t)=>{let e=Math.pow(10,t);return Math.round(i*e)/e};class vs extends ds{constructor(t={}){super(t),this.transform=Mt.render(t.style),this.msg=t.message,this.initial=Ot(t.initial)?t.initial:"",this.float=!!t.float,this.round=t.round||2,this.inc=t.increment||1,this.min=Ot(t.min)?t.min:-1/0,this.max=Ot(t.max)?t.max:1/0,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(t){!t&&t!==0?(this.placeholder=!0,this.rendered=ut.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${Xt(t,this.round)}`),this._value=Xt(t,this.round)),this.fire()}get value(){return this._value}parse(t){return this.float?parseFloat(t):parseInt(t)}valid(t){return t==="-"||t==="."&&this.float||gs.test(t)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let t=this.value;this.value=t!==""?t:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let t=this.value;this.value=t!==""?t:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let t=this.value.toString();if(t.length===0)return this.bell();this.value=this.parse(t=t.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(t,e){if(!this.valid(t))return this.bell();const s=Date.now();if(s-this.lastHit>1e3&&(this.typed=""),this.typed+=t,this.lastHit=s,this.color="cyan",t===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(ct.down(ms(this.outputError,this.out.columns)-1)+Qt(this.outputError,this.out.columns)),this.out.write(Qt(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[Mt.symbol(this.done,this.aborted),ut.bold(this.msg),Mt.delimiter(this.done),!this.done||!this.done&&!this.placeholder?ut[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,e,s)=>t+`
${s?" ":ps.pointerSmall} ${ut.red().italic(e)}`,"")),this.out.write(fs.line+ct.to(0)+this.outputText+ct.save+this.outputError+ct.restore))}}var bs=vs;const F=I,{cursor:ws}=R,ys=B,{clear:te,figures:J,style:ee,wrap:$s,entriesToDisplay:Ss}=j;let xs=class extends ys{constructor(t={}){super(t),this.msg=t.message,this.cursor=t.cursor||0,this.scrollIndex=t.cursor||0,this.hint=t.hint||"",this.warn=t.warn||"- This option is disabled -",this.minSelected=t.min,this.showMinError=!1,this.maxChoices=t.max,this.instructions=t.instructions,this.optionsPerPage=t.optionsPerPage||10,this.value=t.choices.map((e,s)=>(typeof e=="string"&&(e={title:e,value:s}),{title:e&&(e.title||e.value||e),description:e&&e.description,value:e&&(e.value===void 0?s:e.value),selected:e&&e.selected,disabled:e&&e.disabled})),this.clear=te("",this.out.columns),t.overrideRender||this.render()}reset(){this.value.map(t=>!t.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(t=>t.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const t=this.value.filter(e=>e.selected);this.minSelected&&t.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const t=this.value[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const t=!this.value[this.cursor].selected;this.value.filter(e=>!e.disabled).forEach(e=>e.selected=t),this.render()}_(t,e){if(t===" ")this.handleSpaceToggle();else if(t==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${J.arrowUp}/${J.arrowDown}: Highlight option
    ${J.arrowLeft}/${J.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(t,e,s,n){const o=(e.selected?F.green(J.radioOn):J.radioOff)+" "+n+" ";let r,l;return e.disabled?r=t===s?F.gray().underline(e.title):F.strikethrough().gray(e.title):(r=t===s?F.cyan().underline(e.title):e.title,t===s&&e.description&&(l=` - ${e.description}`,(o.length+r.length+l.length>=this.out.columns||e.description.split(/\r?\n/).length>1)&&(l=`
`+$s(e.description,{margin:o.length,width:this.out.columns})))),o+r+F.gray(l||"")}paginateOptions(t){if(t.length===0)return F.red("No matches for this query.");let{startIndex:e,endIndex:s}=Ss(this.cursor,t.length,this.optionsPerPage),n,o=[];for(let r=e;r<s;r++)r===e&&e>0?n=J.arrowUp:r===s-1&&s<t.length?n=J.arrowDown:n=" ",o.push(this.renderOption(this.cursor,t[r],r,n));return`
`+o.join(`
`)}renderOptions(t){return this.done?"":this.paginateOptions(t)}renderDoneOrInstructions(){if(this.done)return this.value.filter(e=>e.selected).map(e=>e.title).join(", ");const t=[F.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&t.push(F.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(ws.hide),super.render();let t=[ee.symbol(this.done,this.aborted),F.bold(this.msg),ee.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=F.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.value),this.out.write(this.clear+t),this.clear=te(t,this.out.columns)}};var ie=xs;const nt=I,Ms=B,{erase:Os,cursor:se}=R,{style:Pt,clear:re,figures:Tt,wrap:Ps,entriesToDisplay:Ts}=j,ne=(i,t)=>i[t]&&(i[t].value||i[t].title||i[t]),Cs=(i,t)=>i[t]&&(i[t].title||i[t].value||i[t]),_s=(i,t)=>{const e=i.findIndex(s=>s.value===t||s.title===t);return e>-1?e:void 0};class As extends Ms{constructor(t={}){super(t),this.msg=t.message,this.suggest=t.suggest,this.choices=t.choices,this.initial=typeof t.initial=="number"?t.initial:_s(t.choices,t.initial),this.select=this.initial||t.cursor||0,this.i18n={noMatches:t.noMatches||"no matches found"},this.fallback=t.fallback||this.initial,this.clearFirst=t.clearFirst||!1,this.suggestions=[],this.input="",this.limit=t.limit||10,this.cursor=0,this.transform=Pt.render(t.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=re("",this.out.columns),this.complete(this.render),this.render()}set fallback(t){this._fb=Number.isSafeInteger(parseInt(t))?parseInt(t):t}get fallback(){let t;return typeof this._fb=="number"?t=this.choices[this._fb]:typeof this._fb=="string"&&(t={title:this._fb}),t||this._fb||{title:this.i18n.noMatches}}moveSelect(t){this.select=t,this.suggestions.length>0?this.value=ne(this.suggestions,t):this.value=this.fallback.value,this.fire()}async complete(t){const e=this.completing=this.suggest(this.input,this.choices),s=await e;if(this.completing!==e)return;this.suggestions=s.map((o,r,l)=>({title:Cs(l,r),value:ne(l,r),description:o.description})),this.completing=!1;const n=Math.max(s.length-1,0);this.moveSelect(Math.min(n,this.select)),t&&t()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,e){let s=this.input.slice(0,this.cursor),n=this.input.slice(this.cursor);this.input=`${s}${t}${n}`,this.cursor=s.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let t=this.input.slice(0,this.cursor-1),e=this.input.slice(this.cursor);this.input=`${t}${e}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let t=this.input.slice(0,this.cursor),e=this.input.slice(this.cursor+1);this.input=`${t}${e}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(t,e,s,n){let o,r=s?Tt.arrowUp:n?Tt.arrowDown:" ",l=e?nt.cyan().underline(t.title):t.title;return r=(e?nt.cyan(Tt.pointer)+" ":"  ")+r,t.description&&(o=` - ${t.description}`,(r.length+l.length+o.length>=this.out.columns||t.description.split(/\r?\n/).length>1)&&(o=`
`+Ps(t.description,{margin:3,width:this.out.columns}))),r+" "+l+nt.gray(o||"")}render(){if(this.closed)return;this.firstRender?this.out.write(se.hide):this.out.write(re(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:e}=Ts(this.select,this.choices.length,this.limit);if(this.outputText=[Pt.symbol(this.done,this.aborted,this.exited),nt.bold(this.msg),Pt.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const s=this.suggestions.slice(t,e).map((n,o)=>this.renderOption(n,this.select===o+t,o===0&&t>0,o+t===e-1&&e<this.choices.length)).join(`
`);this.outputText+=`
`+(s||nt.gray(this.fallback.title))}this.out.write(Os.line+se.to(0)+this.outputText)}}var Ds=As;const H=I,{cursor:Es}=R,Is=ie,{clear:oe,style:le,figures:Q}=j;class Rs extends Is{constructor(t={}){t.overrideRender=!0,super(t),this.inputValue="",this.clear=oe("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const t=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(s=>this.inputValue?!!(typeof s.title=="string"&&s.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof s.value=="string"&&s.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const e=this.filteredOptions.findIndex(s=>s===t);this.cursor=e<0?0:e,this.render()}handleSpaceToggle(){const t=this.filteredOptions[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}handleInputChange(t){this.inputValue=this.inputValue+t,this.updateFilteredOptions()}_(t,e){t===" "?this.handleSpaceToggle():this.handleInputChange(t)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${Q.arrowUp}/${Q.arrowDown}: Highlight option
    ${Q.arrowLeft}/${Q.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:H.gray("Enter something to filter")}
`}renderOption(t,e,s){let n;return e.disabled?n=t===s?H.gray().underline(e.title):H.strikethrough().gray(e.title):n=t===s?H.cyan().underline(e.title):e.title,(e.selected?H.green(Q.radioOn):Q.radioOff)+"  "+n}renderDoneOrInstructions(){if(this.done)return this.value.filter(e=>e.selected).map(e=>e.title).join(", ");const t=[H.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&t.push(H.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(Es.hide),super.render();let t=[le.symbol(this.done,this.aborted),H.bold(this.msg),le.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=H.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+t),this.clear=oe(t,this.out.columns)}}var js=Rs;const he=I,Fs=B,{style:ae,clear:Ls}=j,{erase:Ns,cursor:ue}=R;class Ys extends Fs{constructor(t={}){super(t),this.msg=t.message,this.value=t.initial,this.initialValue=!!t.initial,this.yesMsg=t.yes||"yes",this.yesOption=t.yesOption||"(Y/n)",this.noMsg=t.no||"no",this.noOption=t.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,e){return t.toLowerCase()==="y"?(this.value=!0,this.submit()):t.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(ue.hide):this.out.write(Ls(this.outputText,this.out.columns)),super.render(),this.outputText=[ae.symbol(this.done,this.aborted),he.bold(this.msg),ae.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:he.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(Ns.line+ue.to(0)+this.outputText))}}var ks=Ys,Hs={TextPrompt:di,SelectPrompt:bi,TogglePrompt:xi,DatePrompt:cs,NumberPrompt:bs,MultiselectPrompt:ie,AutocompletePrompt:Ds,AutocompleteMultiselectPrompt:js,ConfirmPrompt:ks};(function(i){const t=i,e=Hs,s=r=>r;function n(r,l,w={}){return new Promise((h,O)=>{const v=new e[r](l),u=w.onAbort||s,a=w.onSubmit||s,y=w.onExit||s;v.on("state",l.onState||s),v.on("submit",E=>h(a(E))),v.on("exit",E=>h(y(E))),v.on("abort",E=>O(u(E)))})}t.text=r=>n("TextPrompt",r),t.password=r=>(r.style="password",t.text(r)),t.invisible=r=>(r.style="invisible",t.text(r)),t.number=r=>n("NumberPrompt",r),t.date=r=>n("DatePrompt",r),t.confirm=r=>n("ConfirmPrompt",r),t.list=r=>{const l=r.separator||",";return n("TextPrompt",r,{onSubmit:w=>w.split(l).map(h=>h.trim())})},t.toggle=r=>n("TogglePrompt",r),t.select=r=>n("SelectPrompt",r),t.multiselect=r=>{r.choices=[].concat(r.choices||[]);const l=w=>w.filter(h=>h.selected).map(h=>h.value);return n("MultiselectPrompt",r,{onAbort:l,onSubmit:l})},t.autocompleteMultiselect=r=>{r.choices=[].concat(r.choices||[]);const l=w=>w.filter(h=>h.selected).map(h=>h.value);return n("AutocompleteMultiselectPrompt",r,{onAbort:l,onSubmit:l})};const o=(r,l)=>Promise.resolve(l.filter(w=>w.title.slice(0,r.length).toLowerCase()===r.toLowerCase()));t.autocomplete=r=>(r.suggest=r.suggest||o,r.choices=[].concat(r.choices||[]),n("AutocompletePrompt",r))})(Nt);const Ct=Nt,Vs=["suggest","format","onState","validate","onRender","type"],ce=()=>{};async function U(i=[],{onSubmit:t=ce,onCancel:e=ce}={}){const s={},n=U._override||{};i=[].concat(i);let o,r,l,w,h,O;const v=async(u,a,y=!1)=>{if(!(!y&&u.validate&&u.validate(a)!==!0))return u.format?await u.format(a,s):a};for(r of i)if({name:w,type:h}=r,typeof h=="function"&&(h=await h(o,{...s},r),r.type=h),!!h){for(let u in r){if(Vs.includes(u))continue;let a=r[u];r[u]=typeof a=="function"?await a(o,{...s},O):a}if(O=r,typeof r.message!="string")throw new Error("prompt message is required");if({name:w,type:h}=r,Ct[h]===void 0)throw new Error(`prompt type (${h}) is not defined`);if(n[r.name]!==void 0&&(o=await v(r,n[r.name]),o!==void 0)){s[w]=o;continue}try{o=U._injected?Bs(U._injected,r.initial):await Ct[h](r),s[w]=o=await v(r,o,!0),l=await t(r,o,s)}catch{l=!await e(r,s)}if(l)return s}return s}function Bs(i,t){const e=i.shift();if(e instanceof Error)throw e;return e===void 0?t:e}function Js(i){U._injected=(U._injected||[]).concat(i)}function Us(i){U._override=Object.assign({},i)}var zs=Object.assign(U,{prompt:U,prompts:Ct,inject:Js,override:Us});const Ws=jt(zs),Gs={type:"ImportDeclaration",specifiers:[{type:"ImportDefaultSpecifier",local:{type:"Identifier",name:"eslintPlugin"}}],source:{type:"StringLiteral",extra:{rawValue:"vite-plugin-eslint",raw:"'vite-plugin-eslint'"},value:"vite-plugin-eslint"}},Ks={type:"CallExpression",callee:{type:"Identifier",name:"eslintPlugin"},arguments:[]},Zs={type:"Identifier",name:`
`},qs={husky:"^8.0.3","lint-staged":"^13.2.2","@commitlint/cli":"^17.6.3","@commitlint/config-conventional":"^17.6.3",eslint:"^8.39.0",prettier:"^2.8.8","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^4.2.1","vite-plugin-eslint":"^1.8.1"},de={env:{browser:!0,es2021:!0,node:!0},overrides:[]},Qs={trailingComma:"es5",tabWidth:2,semi:!0,singleQuote:!0},Xs=["node_modules","dist"],tr={prepare:"npx husky install"},er={"src/**/*.{js,jsx,ts,tsx,json,md}":["eslint --fix --max-warnings=0","prettier --write"],"src/**/*.{scss,less,css}":["prettier --write"]};function ir(i){const t=Rt.parseSync(i,{sourceType:"module",comments:!1}),{program:e}=t,s=e.body.filter(r=>r.type==="ImportDeclaration").map(r=>(delete r.trailingComments,r));if(s.find(r=>r.source.value==="vite-plugin-eslint"))return i;const n=e.body.filter(r=>r.type!=="ImportDeclaration"),o=e.body.find(r=>r.type==="ExportDefaultDeclaration");if(o.declaration.type==="CallExpression"){const[r]=o.declaration.arguments;if(r.type==="ObjectExpression"){const l=r.properties.find(({key:w})=>w.name==="plugins");l&&l.value.elements.push(Ks)}}return s.push(Gs),s.push(Zs),e.body=s.concat(n),t.program=e,Rt.transformFromAstSync(t,i,{sourceType:"module"}).code}let K=!0;const X=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let fe=0;if(X.process&&X.process.env&&X.process.stdout){const{FORCE_COLOR:i,NODE_DISABLE_COLORS:t,NO_COLOR:e,TERM:s}=X.process.env;t||e||i==="0"?K=!1:i==="1"||i==="2"||i==="3"?K=!0:s==="dumb"?K=!1:"CI"in X.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(n=>n in X.process.env)?K=!0:K=process.stdout.isTTY,K&&(fe=s&&s.endsWith("-256color")?2:1)}let pe={enabled:K,supportLevel:fe};function dt(i,t,e=1){const s=`\x1B[${i}m`,n=`\x1B[${t}m`,o=new RegExp(`\\x1b\\[${t}m`,"g");return r=>pe.enabled&&pe.supportLevel>=e?s+(""+r).replace(o,s)+n:""+r}const ft=dt(0,0),me=dt(31,39),ge=dt(33,39),ve=dt(34,39),_t=De(process.argv.slice(2),{string:["_"]}),At=process.cwd(),be=[{name:"react",display:"JavaScript",color:ge},{name:"react-ts",display:"TypeScript",color:ve},{name:"react-swc",display:"JavaScript + SWC",color:ge},{name:"react-swc-ts",display:"TypeScript + SWC",color:ve}],we=be.map(i=>i.name),sr={_gitignore:".gitignore"},Dt="react-project";async function rr(){const i=ye(_t._[0]),t=_t.template||_t.t;let e=i||Dt;const s=()=>e==="."?M.basename(M.resolve()):e;let n;try{n=await Ws([{type:i?null:"text",name:"projectName",message:ft("Project name:"),initial:Dt,onState:m=>{e=ye(m.value)||Dt}},{type:()=>!p.existsSync(e)||lr(e)?null:"confirm",name:"overwrite",message:()=>(e==="."?"Current directory":`Target directory "${e}"`)+" is not empty. Remove existing files and continue?"},{type:(m,{overwrite:g})=>{if(g===!1)throw new Error(me("\u2716")+" Operation cancelled");return null},name:"overwriteChecker",message:""},{type:()=>Se(s())?null:"text",name:"packageName",message:ft("Package name:"),initial:()=>nr(s()),validate:m=>Se(m)||"Invalid package.json name"},{type:t&&we.includes(t)?null:"select",name:"variant",message:typeof t=="string"&&!we.includes(t)?ft(`"${t}" isn't a valid template. Please choose from below: `):ft("Select a variant:"),initial:0,choices:be.map(m=>{const g=m.color;return{title:g(m.display||m.name),value:m}})},{type:()=>"confirm",name:"isEslint",message:"Add ESLint & Prettier for code quality?"},{type:()=>"confirm",name:"isAntd",message:"Add Ant design for UI library?"},{type:()=>"confirm",name:"isRouter",message:"Add React Router for Single Page Application development?"},{type:()=>"confirm",name:"isRedux",message:"Add Redux Toolkit for state management tool?"},{type:()=>"confirm",name:"isQuery",message:"Add React Query for asynchronous state manager?"}],{onCancel:()=>{throw new Error(me("\u2716")+" Operation cancelled")}})}catch(m){console.log(m.message);return}const{overwrite:o,packageName:r,variant:l,isEslint:w,isAntd:h,isRouter:O,isRedux:v,isQuery:u}=n,a=M.join(At,e);o?hr(a):p.existsSync(a)||p.mkdirSync(a,{recursive:!0});let y=l?.name||t,E=!1;y.includes("-swc")&&(E=!0,y=y.replace("-swc","")),console.log(`
Scaffolding project in ${a}...`);const L=M.resolve(It(import.meta.url),"../..",`template-${y}`),P=(m,g=L,T)=>{const D=M.join(a,sr[m]??m);T?p.writeFileSync(D,T):$e(M.join(g,m),D)},Z=p.readdirSync(L);for(const m of Z.filter(g=>g!=="package.json"))P(m);const d=JSON.parse(p.readFileSync(M.join(L,"package.json"),"utf-8"));d.name=r||s(),P("package.json",L,JSON.stringify(d,null,2)+`
`);const c=m=>{P("package.json",L,JSON.stringify(m,null,2)+`
`)};if(w){const m=Me("eslint"),g=M.join(a,".eslintrc.json"),T=M.join(a,".prettierrc.json"),D=M.join(a,".eslintignore"),{packages:z,eslintOverrides:V}=await import(`../eslint-templates/${y}.js`),W={...qs,...z},pt=[...de.overrides,...V],mt={...de,overrides:pt},tt=["vite.config.js","vite.config.ts"],[ot]=tt.map(et=>M.join(a,et)).filter(et=>p.existsSync(et)),gt=ir(p.readFileSync(ot,"utf8"));p.writeFileSync(g,JSON.stringify(mt,null,2)),p.writeFileSync(T,JSON.stringify(Qs,null,2)),p.writeFileSync(D,Xs.join(`
`)),p.writeFileSync(ot,gt);const Oe=p.readdirSync(m);for(const et of Oe.filter(Pe=>!Pe.includes("react")))P(et,m);d.devDependencies={...d.devDependencies,...W},d.scripts={...d.scripts,...tr},d["lint-staged"]=er,c(d)}const S=y.endsWith("-ts")?".tsx":".jsx",C=M.join(a,`/src/App${S}`),f=M.join(a,`/src/main${S}`);if(h){const{packages:m,App:g,Main:T}=await import("./chunks/index.mjs");p.writeFileSync(C,g),p.writeFileSync(f,T),d.dependencies={...d.dependencies,...m},c(d)}const N=m=>{const g=Me(m,y),T=p.readdirSync(g);for(const D of T)P(D,g)};if(O){N("router");let{packages:m,App:g,Main:T,Antd_App:D,Antd_Main:z,AppLayout:V}=await import("./chunks/index2.mjs");if(h&&(g=D,T=z),p.writeFileSync(C,g),p.writeFileSync(f,T),!h){const W=M.join(a,`/src/layout/AppLayout${S}`);p.writeFileSync(W,V)}d.dependencies={...d.dependencies,...m},c(d)}if(v){N("redux");let{packages:m,Main:g,Router_Main:T,Antd_Main:D,Antd_Router_Main:z,App:V,Antd_App:W}=await import("./chunks/index3.mjs");h&&(g=D,V=W),O&&(g=T),h&&O&&(g=z),p.writeFileSync(f,g),!O&&p.writeFileSync(C,V),d.dependencies={...d.dependencies,...m},c(d)}if(u){N("query");let{packages:m,Main:g,Antd_Main:T,Router_Main:D,Antd_Router_Main:z,Redux_Main:V,Redux_Router_Main:W,Redux_Antd_Main:pt,Redux_Antd_Router_Main:mt,App:tt,Antd_App:ot,Redux_App:gt}=await import("./chunks/index4.mjs");h&&(g=T,tt=ot),O&&(g=D),v&&(g=V,tt=gt),h&&O&&(g=z),h&&v&&(g=pt),O&&v&&(g=W),h&&O&&v&&(g=mt),p.writeFileSync(f,g),!O&&p.writeFileSync(C,tt),d.dependencies={...d.dependencies,...m},c(d)}E&&ur(a,y.endsWith("-ts"));const _=M.relative(At,a);console.log(`
Done. Now run:
`),a!==At&&console.log(`  cd ${_.includes(" ")?`"${_}"`:_}`);const A=ar(process.env.npm_config_user_agent);switch(A?A.name:"npm"){default:w&&console.log("  git init"),console.log("  yarn"),console.log("  yarn dev");break}console.log()}function ye(i){return i?.trim().replace(/\/+$/g,"")}function $e(i,t){p.statSync(i).isDirectory()?or(i,t):p.copyFileSync(i,t)}function Se(i){return/^(?:@[a-z\d\-*~][a-z\d\-*._~]*\/)?[a-z\d\-~][a-z\d\-._~]*$/.test(i)}function nr(i){return i.trim().toLowerCase().replace(/\s+/g,"-").replace(/^[._]/,"").replace(/[^a-z\d\-~]+/g,"-")}function or(i,t){p.mkdirSync(t,{recursive:!0});for(const e of p.readdirSync(i)){const s=M.resolve(i,e),n=M.resolve(t,e);$e(s,n)}}function lr(i){const t=p.readdirSync(i);return t.length===0||t.length===1&&t[0]===".git"}function hr(i){if(p.existsSync(i))for(const t of p.readdirSync(i))t!==".git"&&p.rmSync(M.resolve(i,t),{recursive:!0,force:!0})}function ar(i){if(!i)return;const t=i.split(" ")[0].split("/");return{name:t[0],version:t[1]}}function ur(i,t){xe(M.resolve(i,"package.json"),e=>e.replace(/"@vitejs\/plugin-react": ".+?"/,'"@vitejs/plugin-react-swc": "^3.0.0"')),xe(M.resolve(i,`vite.config.${t?"ts":"js"}`),e=>e.replace("@vitejs/plugin-react","@vitejs/plugin-react-swc"))}function xe(i,t){const e=p.readFileSync(i,"utf-8");p.writeFileSync(i,t(e),"utf-8")}function Me(i,t=""){return M.resolve(It(import.meta.url),"../..",`${i}-templates/${t}`)}rr().catch(i=>{console.error(i)});
